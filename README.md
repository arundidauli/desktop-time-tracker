# Tracker

![coverage][coverage_badge]
[![style: very good analysis][very_good_analysis_badge]][very_good_analysis_link]
[![License: MIT][license_badge]][license_link]

Generated by the [Very Good CLI][very_good_cli_link] ü§ñ

A Very Good Project created by Very Good CLI.

---

## Getting Started üöÄ

This project contains 3 flavors:

- development
- staging
- production

To run the desired flavor either use the launch configuration in VSCode/Android Studio or use the following commands:

```sh
# Development
$ flutter run --flavor development --target lib/main_development.dart

# Staging
$ flutter run --flavor staging --target lib/main_staging.dart

# Production
$ flutter run --flavor production --target lib/main_production.dart
```

````markdown
# ‚è±Ô∏è Desktop Time Tracker (Flutter ‚Ä¢ BLoC ‚Ä¢ Windows/macOS/Linux)

[![Flutter](https://img.shields.io/badge/Flutter-Desktop-blue)](#)
[![BLoC](https://img.shields.io/badge/State%20Mgmt-BLoC-7b3fe4)](#)
[![Platforms](https://img.shields.io/badge/Platforms-Windows%20%7C%20macOS%20%7C%20Linux-informational)](#)
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

A **cross-platform desktop app** for **time tracking**, **automatic screenshots**, and **activity monitoring**, built with **Flutter** and the **BLoC** architecture.  
Ideal for freelancers, teams, and anyone who needs reliable activity reporting.

---

## üì∏ Screenshots

> Put your images in a `screenshots/` folder at the repo root. Example filenames used below:
>
> ```
> screenshots/
> ‚îú‚îÄ dashboard.png
> ‚îú‚îÄ weekly_report.png
> ‚îî‚îÄ alert.png
> ```

| Dashboard | Weekly Report | Activity Alert |
|-----------|---------------|----------------|
| ![Dashboard](screenshots/dashboard.png) | ![Weekly Report](screenshots/weekly_report.png) | ![Activity Alert](screenshots/alert.png) |

---

## üß≠ Table of Contents

- [Features](#-features)
- [Getting Started](#-getting-started)
- [Usage](#-usage)
- [Configuration](#-configuration)
- [Architecture](#-architecture-bloc)
- [Project Structure](#-project-structure)
- [Database](#-database)
- [Build & Release](#-build--release)
- [Troubleshooting](#-troubleshooting)
- [Contributing](#-contributing)
- [License](#-license)

---

## ‚ú® Features

- üß© **BLoC Architecture** ‚Äî clean separation of UI and business logic
- ‚ñ∂Ô∏è **Time Tracking** ‚Äî Start/Stop sessions with precise duration
- üñºÔ∏è **Screenshots** ‚Äî Auto-capture every **15 minutes**
- üñ±Ô∏è **Activity Monitoring** ‚Äî detects **keyboard/mouse inactivity**, alerts after **30 minutes**
- üíæ **SQLite Storage** ‚Äî sessions & screenshots saved locally
- üìä **Weekly Reports** ‚Äî historical timeline + total hours per week
- üñ•Ô∏è **Cross-Platform** ‚Äî Windows, macOS, Linux

---

## üöÄ Getting Started

### 1) Prerequisites
- Flutter (stable channel) installed  
- Desktop support enabled:
  ```bash
  flutter config --enable-windows-desktop
  flutter config --enable-macos-desktop
  flutter config --enable-linux-desktop
  flutter doctor -v
````

### 2) Install dependencies

```bash
flutter pub get
```

### 3) Run the app

```bash
# Windows
flutter run -d windows

# macOS
flutter run -d macos

# Linux
flutter run -d linux
```

---

## üïπÔ∏è Usage

1. **Click ‚ÄúStart‚Äù** to begin tracking a session
2. App **automatically takes screenshots** every **15 minutes**
3. **Activity monitor** tracks keyboard/mouse; an **inactivity alert** triggers after **30 minutes**
4. **Click ‚ÄúStop‚Äù** to end the session (duration is saved)
5. Open **‚ÄúWeekly Report‚Äù** to view historical sessions, screenshots, and total hours

---

## ‚öôÔ∏è Configuration

Default timing:

* **Screenshot Interval:** `15 minutes`
* **Inactivity Threshold:** `30 minutes`

> If your project already has config files/constants, update them there. If not, you can introduce a simple config like this:

```dart
// lib/core/config/tracking_config.dart
class TrackingConfig {
  static const Duration screenshotInterval = Duration(minutes: 15);
  static const Duration inactivityThreshold = Duration(minutes: 30);
}
```

Use it in services:

```dart
// lib/services/screenshot_service.dart
final interval = TrackingConfig.screenshotInterval;

// lib/services/activity_monitor.dart
final threshold = TrackingConfig.inactivityThreshold;
```

Platform notes:

* **Windows/macOS/Linux:** screenshot is taken via **platform-specific commands/APIs**.
* For **more accurate activity detection**, consider native plugins per OS (e.g., low-level keyboard/mouse hooks).

---

## üèóÔ∏è Architecture (BLoC)

The app follows a layered approach:

* **Presentation**: Flutter UI + Widgets
* **Application**: BLoCs/Cubits (events ‚Üí states)
* **Domain**: Use cases (business rules) *(optional layer)*
* **Data**: Repositories & data sources (SQLite, platform services)

Example BLoC interfaces:

```dart
// lib/blocs/tracking/tracking_event.dart
sealed class TrackingEvent {}
class StartTracking extends TrackingEvent {}
class StopTracking extends TrackingEvent {}
class InactivityDetected extends TrackingEvent {}
class ActivityResumed extends TrackingEvent {}
class ScreenshotCaptured extends TrackingEvent {
  final String path;
  ScreenshotCaptured(this.path);
}

// lib/blocs/tracking/tracking_state.dart
sealed class TrackingState {}
class TrackingIdle extends TrackingState {}
class TrackingRunning extends TrackingState {
  final DateTime startedAt;
  final Duration elapsed;
  final List<String> screenshots;
  final bool inactive;
  TrackingRunning({
    required this.startedAt,
    required this.elapsed,
    required this.screenshots,
    required this.inactive,
  });
}
```

---

## üìÇ Project Structure

```
lib/
‚îú‚îÄ blocs/
‚îÇ  ‚îú‚îÄ tracking/
‚îÇ  ‚îÇ  ‚îú‚îÄ tracking_bloc.dart
‚îÇ  ‚îÇ  ‚îú‚îÄ tracking_event.dart
‚îÇ  ‚îÇ  ‚îî‚îÄ tracking_state.dart
‚îÇ  ‚îú‚îÄ report/
‚îÇ  ‚îÇ  ‚îú‚îÄ report_cubit.dart
‚îÇ  ‚îÇ  ‚îî‚îÄ report_state.dart
‚îÇ  ‚îî‚îÄ activity/
‚îÇ     ‚îú‚îÄ activity_cubit.dart
‚îÇ     ‚îî‚îÄ activity_state.dart
‚îÇ
‚îú‚îÄ core/
‚îÇ  ‚îú‚îÄ config/
‚îÇ  ‚îÇ  ‚îî‚îÄ tracking_config.dart
‚îÇ  ‚îî‚îÄ utils/
‚îÇ     ‚îî‚îÄ time_format.dart
‚îÇ
‚îú‚îÄ data/
‚îÇ  ‚îú‚îÄ models/
‚îÇ  ‚îÇ  ‚îú‚îÄ session.dart
‚îÇ  ‚îÇ  ‚îî‚îÄ screenshot.dart
‚îÇ  ‚îú‚îÄ repositories/
‚îÇ  ‚îÇ  ‚îî‚îÄ tracking_repository.dart
‚îÇ  ‚îî‚îÄ datasources/
‚îÇ     ‚îî‚îÄ local_db.dart
‚îÇ
‚îú‚îÄ services/
‚îÇ  ‚îú‚îÄ screenshot_service.dart
‚îÇ  ‚îî‚îÄ activity_monitor.dart
‚îÇ
‚îú‚îÄ ui/
‚îÇ  ‚îú‚îÄ screens/
‚îÇ  ‚îÇ  ‚îú‚îÄ dashboard_screen.dart
‚îÇ  ‚îÇ  ‚îú‚îÄ weekly_report_screen.dart
‚îÇ  ‚îÇ  ‚îî‚îÄ settings_screen.dart
‚îÇ  ‚îî‚îÄ widgets/
‚îÇ     ‚îú‚îÄ start_stop_button.dart
‚îÇ     ‚îú‚îÄ session_tile.dart
‚îÇ     ‚îî‚îÄ screenshot_viewer.dart
‚îÇ
‚îî‚îÄ main.dart
```

---

## üóÑÔ∏è Database

SQLite is used for persistent storage.

**Tables (suggested):**

* `sessions`

  * `id` (PK)
  * `start_at` (datetime)
  * `end_at` (datetime, nullable while running)
  * `duration_secs` (int)
* `screenshots`

  * `id` (PK)
  * `session_id` (FK ‚Üí sessions.id)
  * `path` (text)
  * `captured_at` (datetime)

Example schema snippet:

```sql
CREATE TABLE IF NOT EXISTS sessions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  start_at TEXT NOT NULL,
  end_at TEXT,
  duration_secs INTEGER DEFAULT 0
);

CREATE TABLE IF NOT EXISTS screenshots (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  session_id INTEGER NOT NULL,
  path TEXT NOT NULL,
  captured_at TEXT NOT NULL,
  FOREIGN KEY (session_id) REFERENCES sessions(id) ON DELETE CASCADE
);
```

---

## üì¶ Build & Release

```bash
# Windows
flutter build windows

# macOS
flutter build macos

# Linux
flutter build linux
```

Artifacts:

* **Windows:** `build/windows/runner/Release/`
* **macOS:** `build/macos/Build/Products/Release/`
* **Linux:** `build/linux/x64/release/bundle/`

> Note: macOS builds may require code signing settings; Linux builds may need extra GTK/GLib dependencies depending on distro.

---

## üß∞ Troubleshooting

* **Screenshots not saving**

  * Check write permissions to the target directory
  * Verify the platform command/API used for capture
* **No inactivity alerts**

  * Desktop event hooks may vary; consider native plugins for accurate input hooks
* **App won‚Äôt run on desktop**

  * Ensure desktop support is enabled (`flutter config ‚Ä¶`)
  * Run `flutter doctor -v` and resolve issues
* **High CPU usage**

  * Verify timers/streams are disposed in BLoCs/services
  * Throttle screenshot capture to your configured interval

---

## ü§ù Contributing

1. **Fork** the repo
2. Create a feature branch: `git checkout -b feature/your-feature`
3. **Commit** your changes: `git commit -m "feat: add X"`
4. **Push** to the branch: `git push origin feature/your-feature`
5. Open a **Pull Request** üéâ

Coding style:

* Follow **Effective Dart** guidelines
* Keep logic inside **BLoC/Repository**, keep UI dumb
* Add tests for core logic where possible

---

## üìú License

This project is licensed under the **MIT License**. See [LICENSE](LICENSE) for details.

---

## ‚úÖ Quick Commands Recap

```bash
flutter pub get
flutter run -d windows   # or -d macos / -d linux
flutter build windows    # or build macos / build linux
```

**Default behavior**

* Screenshots: every **15 min**
* Inactivity alert: after **30 min**
* Weekly report: sessions + totals by week

---

## üôå Acknowledgements

* Flutter team & community
* BLoC library maintainers
* SQLite & the sqflite ecosystem

```
```

